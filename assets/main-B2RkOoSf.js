import{a as g,h as x,i as u}from"./vendor-CtRQQMrb.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();const i={filters:[{name:"Muscles",value:"muscles"},{name:"Body parts",value:"bodypart"},{name:"Equipment",value:"equipment"}],selectedFilter:null,selectedCategory:null,keyword:"",currentPage:1,totalPages:1,isMobile:()=>window.innerWidth<768,selectFilter(e){this.selectedFilter=e,this.selectedCategory=null,this.page=1},selectCategory(e){this.selectedCategory=e,this.page=1},setKeyword(e){this.keyword=e,this.page=1},async getRequestResults(e,s){const{data:t}=await g.get(e,s);return this.totalPages=t.totalPages,t.results},async getCategories(){const e={filter:this.selectedFilter.name,page:this.currentPage,limit:this.isMobile()?9:12};return this.getRequestResults("https://your-energy.b.goit.study/api/filters",{params:e})},async getExercises(){const e={page:this.currentPage,limit:this.isMobile()?8:10};return e[this.selectedFilter.value]=this.selectedCategory.name,this.keyword&&(e.keyword=this.keyword),this.getRequestResults("https://your-energy.b.goit.study/api/exercises",{params:e})}};let w;function F(){document.querySelector(".loader-overlay").style.display="flex"}function q(){w=setTimeout(F,500)}function L(){clearTimeout(w),document.querySelector(".loader-overlay").style.display="none"}function B(e){const s=document.querySelector(".exercises-categories,.exercises-list-container"),t=s.querySelector(".pagination");if(i.totalPages<2){t&&t.remove();return}const r=document.createElement("ul");r.classList.add("pagination");for(let n=1;n<=i.totalPages;n+=1){const o=document.createElement("li");o.classList.add("pagination-item"),o.textContent=n,n===i.currentPage?o.classList.add("pagination-item-current"):o.addEventListener("click",()=>{e(n)}),r.appendChild(o),t?s.replaceChild(r,t):s.appendChild(r)}}function m(e){const t=e.charAt(0).toUpperCase(),r=e.slice(1);return t+r}function $(e){const s=e.trim();if(s){const t=JSON.parse(localStorage.getItem("favorites"))||[];t.includes(s)||(t.push(s),localStorage.setItem("favorites",JSON.stringify(t)))}}function k(e){const s=e.trim();if(s){const t=JSON.parse(localStorage.getItem("favorites"))||[],r=t.indexOf(s);r!==-1&&(t.splice(r,1),localStorage.setItem("favorites",JSON.stringify(t)))}}const c={dialog:document.querySelector('[data-modal="exercise"]'),closeBtn:document.querySelector("[data-modal-close]"),favouritesBtn:document.querySelector("[data-add-favourites]"),ratingBtn:document.querySelector("[data-rating-open]"),exercisesLayout:document.querySelector("[data-exercise]")},T=()=>c.dialog.showModal(),R=()=>c.dialog.close(),N=e=>(JSON.parse(localStorage.getItem("favorites"))||[]).includes(e),A=(e,s,t)=>{const r=s;if(t){k(e),r.firstElementChild.textContent="Add to favorites",r.classList.remove("is-favourite");return}$(e),r.firstElementChild.textContent="Remove from favorites",r.classList.add("is-favourite")},V=(e,s,t)=>{const r=s;if(t){r.firstElementChild.textContent="Add to favorites",r.classList.remove("is-favourite");return}r.firstElementChild.textContent="Remove from favorites",r.classList.add("is-favourite")},U=e=>{const s=e.currentTarget,t=s.dataset.addFavourites,r=N(t);A(t,s,r)},J=()=>{console.log("Click on rating btn")},j=async e=>(await fetch(`https://your-energy.b.goit.study/api/exercises/${e}`)).json(),K=e=>{const{bodyPart:s,equipment:t,gifUrl:r,name:n,target:o,description:a,rating:l,burnedCalories:v,time:C,popularity:S}=e;return`<div class="modal-ill">
      <img
        src="${r}"
        alt="${n}"
        width="295"
        height="258"
        loading="lazy"
      />
    </div>
    <div class="modal-details">
    <h2 class="modal-caption">${m(n)}</h2>
    <div class="modal-rating">
      <p>${l.toFixed(1)}</p>
      <svg width="98" height="13" id="rating-stars">
        <use style="--shift: -2" href="./assets/icons.svg#star"></use>
        <use style="--shift: -1" href="./assets/icons.svg#star"></use>
        <use style="--shift: 0" href="./assets/icons.svg#star"></use>
        <use style="--shift: 1" href="./assets/icons.svg#star"></use>
        <use style="--shift: 2" href="./assets/icons.svg#star"></use>
      </svg>
    </div>
    <ul class="modal-meta">
      <li>
        <h3 class="modal-meta-caption">Target</h3>
        <p class="modal-meta-info">${m(o)}</p>
      </li>
      <li>
        <h3 class="modal-meta-caption">Body Part</h3>
        <p class="modal-meta-info">${m(s)}</p>
      </li>
      <li>
        <h3 class="modal-meta-caption">Equipment</h3>
        <p class="modal-meta-info">${m(t)}</p>
      </li>
      <li>
        <h3 class="modal-meta-caption">Popular</h3>
        <p class="modal-meta-info">${S}</p>
      </li>
      <li>
        <h3 class="modal-meta-caption">Burned Calories</h3>
        <p class="modal-meta-info">${v}/${C} min</p>
      </li>
    </ul>
    <p class="modal-desc">${a}</p></div>`};async function f(e){const s=await j(e),t=K(s),r=c.dialog.querySelector(".modal-body"),n=c.dialog.querySelector(".modal-btn[data-add-favourites]"),o=N(e);n.dataset.addFavourites=e,r.innerHTML=t,V(e,n,!o),T()}c.closeBtn&&c.closeBtn.addEventListener("click",R);c.favouritesBtn&&c.favouritesBtn.addEventListener("click",U);c.ratingBtn&&c.ratingBtn.addEventListener("click",J);c.exercisesLayout&&c.exercisesLayout.addEventListener("click",f);function H(e){const s="#excercise-card-detail-template",t=[],r=document.querySelector(s).content.cloneNode(!0);r.querySelector(".card-details-title").textContent="Burned Calories:",r.querySelector(".card-details-value").textContent=`${e.burnedCalories} / ${e.time} min`,t.push(r);const n=document.querySelector(s).content.cloneNode(!0);n.querySelector(".card-details-title").textContent="Body Part:",n.querySelector(".card-details-value").textContent=e.bodyPart[0].toUpperCase()+e.bodyPart.slice(1),t.push(n);const o=document.querySelector(s).content.cloneNode(!0);return o.querySelector(".card-details-title").textContent="Target:",o.querySelector(".card-details-value").textContent=e.target[0].toUpperCase()+e.target.slice(1),t.push(o),t}function Y(e){const t=document.querySelector("#excercise-card-template").content.cloneNode(!0),r="_id";t.children[0].dataset.id=e[r],t.querySelector(".card-category").textContent=e.bodyPart,t.querySelector(".rating-value").textContent=e.rating.toFixed(1),t.querySelector(".start-button").addEventListener("click",a=>{a.preventDefault(),f(e[r])}),t.querySelector(".card-title").textContent=e.name[0].toUpperCase()+e.name.slice(1);const o=t.querySelector(".card-details-list");return H(e).forEach(a=>{o.append(a)}),t}async function y(e=1){i.currentPage=e;const s=await i.getExercises(),t=document.querySelector(".exercises-categories,.exercises-list-container");t.classList.remove("exercises-categories"),t.classList.add("exercises-list-container"),t.innerHTML="";const r=document.createElement("ul");r.classList.add("exercises-cards"),s.forEach(n=>{const o=Y(n);o.addEventListener("click",()=>{f(o)}),r.appendChild(o)}),t.appendChild(r),B(n=>{var o;y(n),(o=document.getElementById("exercises-filters"))==null||o.scrollIntoView({behavior:"smooth"})})}function _(){const e=document.querySelector(".exercises-search");if(!e)return;const s=document.querySelector(".search-icon");e.addEventListener("input",t=>{t.target.value?s==null||s.classList.add("search-active"):s==null||s.classList.remove("search-active"),i.setKeyword(t.target.value)}),document.querySelector("#exercises-filters-form").addEventListener("submit",t=>{t.preventDefault(),y()}),s==null||s.addEventListener("click",()=>{i.keyword&&(s==null||s.classList.remove("search-active"),e.value="",i.setKeyword(""),y())})}function z(){document.querySelector(".exercises-search").value=""}function P(){const e=document.querySelector(".exercises-search-container");e&&(i.selectedCategory?e.classList.remove("hide"):e.classList.add("hide"),z())}function Q(e,s){const t=document.querySelector("#exercise-category-template").content.cloneNode(!0);return t.querySelector("h3").textContent=e.name,t.querySelector("p").textContent=e.filter,t.querySelector(".exercise-category").style.backgroundImage=`url(${e.imgURL})`,s&&t.querySelector(".exercise-category").addEventListener("click",()=>s(e)),t}function M(){if(!i.selectedCategory){document.querySelector(".exercises-header-selected-category").classList.add("visually-hidden"),document.querySelector(".exercises-header-category-name").textContent="";return}document.querySelector(".exercises-header-category-name").textContent=i.selectedCategory.name,document.querySelector(".exercises-header-selected-category").classList.remove("visually-hidden")}async function E(e=1){i.currentPage=e;const s=await i.getCategories(),t=document.querySelector(".exercises-categories, .exercises-list-container");if(!t){console.log("Container not found");return}t.classList.add("exercises-categories"),t.classList.remove("exercises-list-container"),t.innerHTML="";const r=document.createElement("ul");r.classList.add("categories-cards"),s.forEach(n=>{const o=Q(n,l=>{i.selectCategory(l),M(),P(),y()}),a=document.createElement("li");a.appendChild(o),r.appendChild(a)}),t.appendChild(r),B(n=>{var o;E(n),(o=document.getElementById("exercises-filters"))==null||o.scrollIntoView({behavior:"smooth"})})}function W(){const e=document.querySelector(".exercises-filter-list");e&&i.filters.forEach(s=>{const t=document.createElement("li");t.classList.add("exercises-filter-item"),s.value===i.selectedFilter.value&&t.classList.add("current");const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("exercises-filter-button"),r.textContent=s.name,r.addEventListener("click",async n=>{n.preventDefault(),e.querySelectorAll(".exercises-filter-item").forEach(a=>{a.classList.remove("current")}),t.classList.add("current"),i.selectFilter(s),M(),P(),await E()}),t.appendChild(r),e&&e.appendChild(t)})}document.addEventListener("DOMContentLoaded",async()=>{document.querySelector(".exercises-filters")&&(q(),i.selectFilter(i.filters[0]),W(),_(),await E(),L())});const b="blockquote_cache",D="YYYY-MM-DD";function Z(){return x().utc().format(D)}function G(e,s){return x(e).utc().isSame(x(s,D).utc(),"day")}async function X(){const e=Z(),s=localStorage.getItem(b);if(s){const n=JSON.parse(s);if(G(e,n.date))return n.data}const t=await g.get("https://your-energy.b.goit.study/api/quote"),{data:r}=t;return r&&localStorage.setItem(b,JSON.stringify({data:r,date:e})),r}(async()=>{const e=await X();(!e||!e.author||!e.quote)&&console.log("Can't retrieve fresh quote of the day data from provider's API");const s=document.querySelector(".quote-block"),t=s.querySelector(".quote-desc"),r=s.querySelector(".quote-author");t.textContent=e.quote,r.textContent=e.author})();const d=document.getElementById("subscribtionForm");(()=>{if(!d)return;const e=d.querySelector('input[name="email"]'),s=document.getElementById("subscribtionFormBtn"),t=o=>/^\w+(\.\w+)?@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(o),r=()=>{const o=e.value.trim();t(o)?(e.style.borderColor="",s.disabled=!1):(o===""?e.style.borderColor="":e.style.borderColor="red",s.disabled=!0)};document.addEventListener("DOMContentLoaded",r),e.addEventListener("input",r);const n=async o=>{o.preventDefault();try{s.disabled=!0,q(),await g.post("https://your-energy.b.goit.study/api/subscription",JSON.stringify({email:e.value.trim()}),{headers:{"Content-Type":"application/json"}}),d.reset(),u.success({title:"OK",message:"You have subscribed!",position:"topRight"})}catch(a){a.response?a.response.status===409?(d.reset(),u.warning({title:"OK",message:"Subscription already exists.",position:"topRight"})):u.error({title:"Oops",message:a.response.statusText,position:"topRight"}):u.error({title:"Oops",message:a.message,position:"topRight"})}finally{L()}};d.addEventListener("submit",n)})();const O=document.querySelector(".js-menu-backdrop"),ee=document.querySelector(".js-open-menu"),te=document.querySelector(".js-close-menu"),se=document.querySelector(".js-menu-link");function h(){O.classList.toggle("is-open")}function re(e){if(window.location.href===e.target.href){e.preventDefault();return}h()}function oe({target:e}){e.closest("#mob-menu")||h()}ee.addEventListener("click",h);te.addEventListener("click",h);se.addEventListener("click",re);O.addEventListener("click",oe);const p=document.getElementById("scrollBtn");p.addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}),p.blur()});window.addEventListener("scroll",()=>{window.scrollY>50?p.style.display="flex":p.style.display="none"});async function ne(e){return(await g.get(`https://your-energy.b.goit.study/api/exercises/${e}`)).data}function ae(e){const s="#excercise-card-detail-template",t=[],r=document.querySelector(s).content.cloneNode(!0);r.querySelector(".card-details-title").textContent="Burned Calories:",r.querySelector(".card-details-value").textContent=`${e.burnedCalories} / ${e.time} min`,t.push(r);const n=document.querySelector(s).content.cloneNode(!0);n.querySelector(".card-details-title").textContent="Body Part:",n.querySelector(".card-details-value").textContent=e.bodyPart[0].toUpperCase()+e.bodyPart.slice(1),t.push(n);const o=document.querySelector(s).content.cloneNode(!0);return o.querySelector(".card-details-title").textContent="Target:",o.querySelector(".card-details-value").textContent=e.target[0].toUpperCase()+e.target.slice(1),t.push(o),t}function ie(e){const t=document.querySelector("#excercise-card-template").content.cloneNode(!0),r="_id";t.children[0].dataset.id=e[r],t.querySelector(".card-category").textContent=e.bodyPart,t.querySelector(".rating-value").textContent=e.rating.toFixed(1),t.querySelector(".start-button").addEventListener("click",a=>{a.preventDefault(),f(e[r])}),t.querySelector(".card-title").textContent=e.name[0].toUpperCase()+e.name.slice(1);const o=t.querySelector(".card-details-list");return ae(e).forEach(a=>{o.append(a)}),t}function I(){const e=document.getElementById("exerciseList"),s=document.getElementById("exerciseListEmpty");e&&(e.innerHTML="");const t=JSON.parse(localStorage.getItem("favorites"))||[],r=document.createDocumentFragment();if(t.length===0&&s)s.classList.remove("visually-hidden");else if(e){q();const n=t.map(o=>ne(o).then(a=>ie(a)));Promise.all(n).then(o=>{o.forEach(a=>{r.appendChild(a)}),L(),e.appendChild(r)}).then(()=>{document.querySelectorAll(".card-category").forEach(a=>{const l=document.createElement("button");l.className="remove-button",l.innerHTML='<div class="remove-btn-icon"><svg width="16" height="16" viewBox="0 0 14 16" xmlns="http://www.w3.org/2000/svg"><path d="M9.66667 4.00004V3.46671C9.66667 2.71997 9.66667 2.3466 9.52134 2.06139C9.39351 1.8105 9.18954 1.60653 8.93865 1.4787C8.65344 1.33337 8.28007 1.33337 7.53333 1.33337H6.46667C5.71993 1.33337 5.34656 1.33337 5.06135 1.4787C4.81046 1.60653 4.60649 1.8105 4.47866 2.06139C4.33333 2.3466 4.33333 2.71997 4.33333 3.46671V4.00004M5.66667 7.66671V11M8.33333 7.66671V11M1 4.00004H13M11.6667 4.00004V11.4667C11.6667 12.5868 11.6667 13.1469 11.4487 13.5747C11.2569 13.951 10.951 14.257 10.5746 14.4487C10.1468 14.6667 9.58677 14.6667 8.46667 14.6667H5.53333C4.41323 14.6667 3.85318 14.6667 3.42535 14.4487C3.04903 14.257 2.74307 13.951 2.55132 13.5747C2.33333 13.1469 2.33333 12.5868 2.33333 11.4667V4.00004" stroke="#242424" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg></div>';const C=a.closest(".excercise-card-item").getAttribute("data-id");l.setAttribute("data-id",C),a.insertAdjacentElement("afterend",l),l.addEventListener("click",()=>{const S=l.getAttribute("data-id");k(S),I()})})})}}window.onload=()=>{I()};
//# sourceMappingURL=main-B2RkOoSf.js.map
